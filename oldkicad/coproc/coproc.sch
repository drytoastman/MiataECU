EESchema Schematic File Version 2  date 11/2/2011 7:00:39 PM
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:special
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:PNPComponents
LIBS:coproc-cache
EELAYER 25  0
EELAYER END
$Descr A4 11700 8267
encoding utf-8
Sheet 1 4
Title "CoProcessor"
Date "3 nov 2011"
Rev "1"
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 8400 2900 500  1000
U 4EB1EB42
F0 "accelerometer" 60
F1 "accelerometer.sch" 60
F2 "5V" I L 8400 3050 60 
F3 "GND" I L 8400 3250 60 
F4 "SCL" I L 8400 3400 60 
F5 "SDI" I L 8400 3500 60 
F6 "CS" I L 8400 3600 60 
F7 "SDO" O L 8400 3700 60 
$EndSheet
Text Label 2350 3600 2    60   ~ 0
AccelCS
Wire Wire Line
	2400 3600 1950 3600
Connection ~ 1250 800 
Connection ~ 2250 1300
Wire Wire Line
	2250 1200 2250 1300
Connection ~ 2250 800 
Connection ~ 1950 800 
Wire Wire Line
	2100 2800 2400 2800
Wire Wire Line
	1550 2800 1600 2800
Wire Wire Line
	2400 2300 1950 2300
Wire Wire Line
	4200 1650 4200 1700
Wire Wire Line
	4000 1650 4000 1700
Wire Wire Line
	3800 1650 3800 1700
Wire Wire Line
	3600 1650 3600 1700
Wire Wire Line
	5400 3300 5550 3300
Wire Wire Line
	5400 3100 5550 3100
Wire Wire Line
	5400 2900 5550 2900
Wire Wire Line
	5400 2500 5500 2500
Wire Wire Line
	5400 2300 5500 2300
Wire Wire Line
	5400 2100 5500 2100
Wire Wire Line
	5200 4450 4500 4450
Wire Wire Line
	1550 2900 1600 2900
Wire Wire Line
	4300 1700 4300 1250
Wire Wire Line
	3900 4100 3900 4550
Wire Wire Line
	3000 4600 2750 4600
Wire Wire Line
	3700 4100 3700 4400
Connection ~ 1600 1300
Wire Wire Line
	1600 1300 1600 1200
Wire Wire Line
	2450 1300 850  1300
Wire Wire Line
	4700 1700 4700 1250
Wire Wire Line
	4500 1700 4500 1250
Wire Wire Line
	2400 3400 1950 3400
Wire Wire Line
	3900 4550 4200 4550
Wire Wire Line
	3500 1700 3500 1150
Wire Wire Line
	2400 3200 1950 3200
Wire Wire Line
	3850 800  3850 1100
Wire Wire Line
	3850 1100 3300 1100
Wire Wire Line
	3300 1100 3300 1700
Connection ~ 3200 800 
Wire Wire Line
	3300 800  3100 800 
Connection ~ 3600 4800
Wire Wire Line
	3600 4900 3600 4550
Wire Wire Line
	8950 2500 8600 2500
Wire Wire Line
	8950 2200 8600 2200
Wire Wire Line
	8950 1900 8600 1900
Wire Wire Line
	8950 1600 8600 1600
Wire Wire Line
	8950 1300 8600 1300
Wire Wire Line
	8950 4950 8450 4950
Wire Wire Line
	8950 4650 8450 4650
Wire Wire Line
	9800 5850 10400 5850
Wire Wire Line
	9950 5850 9950 6000
Connection ~ 9950 5850
Wire Wire Line
	9950 6000 9800 6000
Wire Wire Line
	8600 6000 8000 6000
Wire Wire Line
	9800 6150 10400 6150
Wire Wire Line
	6700 4550 6350 4550
Wire Wire Line
	2950 6300 3150 6300
Wire Wire Line
	2150 6400 1800 6400
Wire Wire Line
	2150 6200 1800 6200
Wire Wire Line
	9800 6300 9950 6300
Wire Wire Line
	9950 6300 9950 6150
Wire Wire Line
	8000 6150 8600 6150
Wire Wire Line
	6350 4450 6450 4450
Wire Wire Line
	6450 4450 6450 4950
Wire Wire Line
	6450 4950 5150 4950
Wire Wire Line
	5150 4950 5150 4550
Wire Wire Line
	5150 4550 5200 4550
Wire Wire Line
	4800 4650 5200 4650
Wire Wire Line
	6350 4650 6700 4650
Wire Wire Line
	8600 5850 8000 5850
Connection ~ 9950 6150
Wire Wire Line
	2150 6300 1800 6300
Wire Wire Line
	2950 6200 3150 6200
Wire Wire Line
	2950 6400 3150 6400
Wire Wire Line
	8600 6300 8000 6300
Wire Wire Line
	8950 4300 8450 4300
Wire Wire Line
	8950 4450 8450 4450
Wire Wire Line
	8950 4800 8450 4800
Wire Wire Line
	8950 1450 8600 1450
Wire Wire Line
	8950 1750 8600 1750
Wire Wire Line
	8950 2050 8600 2050
Wire Wire Line
	8950 2350 8600 2350
Wire Wire Line
	4200 4550 4200 4900
Connection ~ 4200 4800
Wire Wire Line
	3600 5300 4200 5300
Wire Wire Line
	3200 1700 3200 800 
Wire Wire Line
	3700 800  4050 800 
Connection ~ 3850 800 
Wire Wire Line
	5400 2700 6000 2700
Wire Wire Line
	2400 3100 1950 3100
Wire Wire Line
	2400 3300 1950 3300
Wire Wire Line
	3600 4550 3800 4550
Wire Wire Line
	3200 4100 3200 4400
Wire Wire Line
	4600 1700 4600 1250
Wire Wire Line
	2500 800  850  800 
Connection ~ 1600 800 
Wire Wire Line
	1250 1300 1250 1200
Connection ~ 1250 1300
Wire Wire Line
	3600 4100 3600 4400
Wire Wire Line
	3500 4100 3500 4600
Wire Wire Line
	3800 4550 3800 4100
Wire Wire Line
	4400 1700 4400 1250
Wire Wire Line
	2100 2900 2400 2900
Wire Wire Line
	4600 4100 4600 4750
Wire Wire Line
	4600 4750 5200 4750
Wire Wire Line
	4500 4450 4500 4100
Wire Wire Line
	5400 2200 5500 2200
Wire Wire Line
	5400 2400 5500 2400
Wire Wire Line
	5400 2800 5550 2800
Wire Wire Line
	5400 3000 5550 3000
Wire Wire Line
	5400 3200 5550 3200
Wire Wire Line
	5400 3400 5550 3400
Wire Wire Line
	3700 1650 3700 1700
Wire Wire Line
	3900 1650 3900 1700
Wire Wire Line
	4100 1650 4100 1700
Wire Wire Line
	2400 2200 1950 2200
Wire Wire Line
	1550 2700 1600 2700
Wire Wire Line
	2100 2700 2400 2700
Wire Wire Line
	1950 1200 1950 1300
Connection ~ 1950 1300
Wire Wire Line
	4400 4100 4400 4450
$Comp
L C C21
U 1 1 4EADF704
P 2250 1000
F 0 "C21" H 2300 1100 50  0000 L CNN
F 1 "33nF" H 2300 900 50  0000 L CNN
F 2 "SM0805" H 2250 1000 60  0001 C CNN
	1    2250 1000
	1    0    0    -1  
$EndComp
$Comp
L C C20
U 1 1 4EADF6FF
P 1950 1000
F 0 "C20" H 2000 1100 50  0000 L CNN
F 1 "120nF" H 2000 900 50  0000 L CNN
F 2 "SM0805" H 1950 1000 60  0001 C CNN
	1    1950 1000
	1    0    0    -1  
$EndComp
$Comp
L R R18
U 1 1 4EADBC26
P 1850 2700
F 0 "R18" V 1930 2700 50  0000 C CNN
F 1 "1K" V 1850 2700 50  0000 C CNN
F 2 "R4" H 1850 2700 60  0001 C CNN
	1    1850 2700
	0    1    1    0   
$EndComp
$Comp
L R R19
U 1 1 4EADBC22
P 1850 2800
F 0 "R19" V 1930 2800 50  0000 C CNN
F 1 "1K" V 1850 2800 50  0000 C CNN
F 2 "R4" H 1850 2800 60  0001 C CNN
	1    1850 2800
	0    1    1    0   
$EndComp
Text Label 2300 2300 2    60   ~ 0
PMISO
Text Label 2300 2200 2    60   ~ 0
PMOSI
$Comp
L CONN_7 P3
U 1 1 4EADB758
P 3900 1300
F 0 "P3" V 3870 1300 60  0000 C CNN
F 1 "CONN_7" V 3970 1300 60  0000 C CNN
F 2 "SIL-7" H 3900 1300 60  0001 C CNN
F 4 "ignore" V 3900 1300 60  0001 C CNN "Digikey"
	1    3900 1300
	0    -1   -1   0   
$EndComp
$Comp
L CONN_7 P5
U 1 1 4EADB714
P 5900 3100
F 0 "P5" V 5870 3100 60  0000 C CNN
F 1 "CONN_7" V 5970 3100 60  0000 C CNN
F 2 "SIL-7" H 5900 3100 60  0001 C CNN
F 4 "ignore" V 5900 3100 60  0001 C CNN "Digikey"
	1    5900 3100
	1    0    0    1   
$EndComp
$Comp
L CONN_5 P4
U 1 1 4EADB6E1
P 5900 2300
F 0 "P4" V 5850 2300 50  0000 C CNN
F 1 "CONN_5" V 5950 2300 50  0000 C CNN
F 2 "SIL-5" H 5900 2300 60  0001 C CNN
F 4 "ignore" V 5900 2300 60  0001 C CNN "Digikey"
	1    5900 2300
	1    0    0    -1  
$EndComp
Text Label 4400 1650 1    60   ~ 0
5V
Text Label 4300 1650 1    60   ~ 0
GND
Text Label 3500 4150 3    60   ~ 0
RESET
Text Label 2850 4600 0    60   ~ 0
5V
Text Label 3600 4150 3    60   ~ 0
5V
Text Label 3700 4150 3    60   ~ 0
GND
Text Label 4000 800  2    60   ~ 0
GND
Text Label 2450 1300 0    60   ~ 0
GND
Text Label 1800 800  0    60   ~ 0
5V
$Comp
L C C13
U 1 1 4EADAA5E
P 3500 800
F 0 "C13" H 3550 900 50  0000 L CNN
F 1 "120nF" H 3550 700 50  0000 L CNN
F 2 "SM0805" H 3500 800 60  0001 C CNN
	1    3500 800 
	0    1    1    0   
$EndComp
$Comp
L C C12
U 1 1 4EADAA55
P 1600 1000
F 0 "C12" H 1650 1100 50  0000 L CNN
F 1 "33nF" H 1650 900 50  0000 L CNN
F 2 "SM0805" H 1600 1000 60  0001 C CNN
	1    1600 1000
	1    0    0    -1  
$EndComp
$Comp
L C C11
U 1 1 4EADAA52
P 1250 1000
F 0 "C11" H 1300 1100 50  0000 L CNN
F 1 "120nF" H 1300 900 50  0000 L CNN
F 2 "SM0805" H 1250 1000 60  0001 C CNN
	1    1250 1000
	1    0    0    -1  
$EndComp
Text Label 3800 5300 0    60   ~ 0
GND
$Comp
L AT90CAN IC1
U 1 1 4EADA89D
P 3700 3700
F 0 "IC1" H 2600 5550 50  0000 L BNN
F 1 "AT90CAN" H 3775 4450 50  0000 L BNN
F 2 "TQFP_64" H 4050 4300 50  0001 C CNN
	1    3700 3700
	1    0    0    -1  
$EndComp
NoConn ~ 3900 2700
Text Label 4850 4750 0    60   ~ 0
CanRx
Text Label 4850 4450 0    60   ~ 0
CanTx
Text HLabel 8600 2500 0    60   Input ~ 0
KnockSensor
Text Label 8900 2350 2    60   ~ 0
Window
Text Label 8900 2200 2    60   ~ 0
SharedClock
Text Label 8900 2050 2    60   ~ 0
KnockCS
Text Label 8900 1900 2    60   ~ 0
SCLK
Text Label 8900 1750 2    60   ~ 0
MISO
Text Label 8900 1600 2    60   ~ 0
MOSI
Text Label 8900 1450 2    60   ~ 0
GND
Text Label 8900 1300 2    60   ~ 0
5V
$Sheet
S 8950 1150 750  1500
U 4EACEB12
F0 "knock" 60
F1 "knock.sch" 60
F2 "5V" I L 8950 1300 60 
F3 "SDO" O L 8950 1750 60 
F4 "SDI" I L 8950 1600 60 
F5 "SCLK" I L 8950 1900 60 
F6 "GND" I L 8950 1450 60 
F7 "Clock" I L 8950 2200 60 
F8 "CS" I L 8950 2050 60 
F9 "Window" I L 8950 2350 60 
F10 "KnockSensor" I L 8950 2500 60 
$EndSheet
Text HLabel 8450 4800 0    60   Input ~ 0
Phase12V
Text Label 3500 1650 1    60   ~ 0
12VMeasure
Text Label 10000 6150 0    60   ~ 0
12V
Text HLabel 10400 6150 2    60   Input ~ 0
12V
Text Label 8850 4300 2    60   ~ 0
12V
Text Label 8850 4450 2    60   ~ 0
GND
Text Label 8900 4650 2    60   ~ 0
12VMeasure
Text Label 8900 4950 2    60   ~ 0
PhasePin
$Sheet
S 8950 4200 700  900 
U 4EABDB9D
F0 "alternator" 60
F1 "alternator.sch" 60
F2 "GND" I L 8950 4450 60 
F3 "12VMeasure" O L 8950 4650 60 
F4 "Phase12V" I L 8950 4800 60 
F5 "12V" I L 8950 4300 60 
F6 "PhasePin" I L 8950 4950 60 
$EndSheet
Text Label 4400 4150 3    60   ~ 0
PhasePin
Text Notes 2350 6600 0    60   ~ 0
ISP Header
Text Label 2350 3400 2    60   ~ 0
FieldPWM
Text HLabel 8000 6150 0    60   Input ~ 0
FieldDriver
Text HLabel 10400 5850 2    60   Input ~ 0
IAC
Text HLabel 6700 4650 2    60   Input ~ 0
CANL
Text HLabel 1550 2800 0    60   Input ~ 0
Ignition2
Text HLabel 1550 2700 0    60   Input ~ 0
Ignition1
Text HLabel 1550 2900 0    60   Input ~ 0
VSSSignal
Text HLabel 850  800  0    60   Input ~ 0
5V
Text HLabel 850  1300 0    60   Input ~ 0
GND
Text HLabel 6700 4550 2    60   Input ~ 0
CANH
Text Label 8550 6000 2    60   ~ 0
Idle
$Comp
L CONN_3X2 P2
U 1 1 4EA0F9A7
P 2550 6350
F 0 "P2" H 2550 6600 50  0000 C CNN
F 1 "CONN_3X2" V 2550 6400 40  0000 C CNN
F 2 "PIN_ARRAY_3x2" H 2550 6350 60  0001 C CNN
F 4 "parts" H 2550 6350 60  0001 C CNN "Digikey"
	1    2550 6350
	1    0    0    -1  
$EndComp
$Comp
L R R17
U 1 1 4E9FE3CD
P 1850 2900
F 0 "R17" V 1930 2900 50  0000 C CNN
F 1 "1K" V 1850 2900 50  0000 C CNN
F 2 "R4" H 1850 2900 60  0001 C CNN
	1    1850 2900
	0    1    1    0   
$EndComp
Text Label 3200 4150 3    60   ~ 0
Idle
Text Label 3000 6400 0    60   ~ 0
GND
Text Label 3000 6300 0    60   ~ 0
PMOSI
Text Label 3000 6200 0    60   ~ 0
5V
Text Label 1850 6400 0    60   ~ 0
RESET
Text Label 1850 6300 0    60   ~ 0
SCLK
Text Label 1850 6200 0    60   ~ 0
PMISO
Text Label 8550 5850 2    60   ~ 0
GND
$Comp
L VNS3NV04D U11
U 1 1 4E9E8628
P 9200 6150
F 0 "U11" H 9000 6550 60  0000 C CNN
F 1 "VNS3NV04D" H 9150 5850 60  0000 C CNN
F 2 "SO8N" H 8900 6450 60  0001 C CNN
F 4 "497-3318-1-ND" H 9200 6150 60  0001 C CNN "Digikey"
	1    9200 6150
	1    0    0    -1  
$EndComp
Text Label 5450 2700 0    60   ~ 0
SharedClock
Text Label 4700 1650 1    60   ~ 0
Window
Text Label 4600 1650 1    60   ~ 0
KnockCS
Text Label 8550 6300 2    60   ~ 0
FieldPWM
Text Label 4850 4650 0    60   ~ 0
5V
Text Label 6200 4950 0    60   ~ 0
GND
$Comp
L MCP2551 U9
U 1 1 4E994AB0
P 5650 4750
F 0 "U9" H 5550 5200 60  0000 C CNN
F 1 "MCP2551" H 5700 4600 60  0000 C CNN
F 2 "SO8E" H 5650 4750 60  0001 C CNN
F 4 "MCP2551-I/SN" H 5650 4750 60  0001 C CNN "Digikey"
	1    5650 4750
	1    0    0    -1  
$EndComp
$Comp
L INDUCTOR L1
U 1 1 4E9947FE
P 2800 800
F 0 "L1" V 2750 800 40  0000 C CNN
F 1 "10uH" V 2900 800 40  0000 C CNN
F 2 "SM1206" H 2800 800 60  0001 C CNN
	1    2800 800 
	0    1    1    0   
$EndComp
$Comp
L R R20
U 1 1 4E993F05
P 3250 4600
F 0 "R20" V 3330 4600 50  0000 C CNN
F 1 "10K" V 3250 4600 50  0000 C CNN
F 2 "SM0805" H 3250 4600 60  0001 C CNN
	1    3250 4600
	0    1    1    0   
$EndComp
Text Label 2300 3200 2    60   ~ 0
MOSI
Text Label 2300 3300 2    60   ~ 0
MISO
$Comp
L CRYSTAL X1
U 1 1 4E97F0C2
P 3900 4800
F 0 "X1" H 3900 4950 60  0000 C CNN
F 1 "8MHz" H 3900 4650 60  0000 C CNN
F 2 "HC-49V" H 3900 4800 60  0001 C CNN
	1    3900 4800
	1    0    0    -1  
$EndComp
$Comp
L C C15
U 1 1 4E97F046
P 4200 5100
F 0 "C15" H 4250 5200 50  0000 L CNN
F 1 "22pF" H 4250 5000 50  0000 L CNN
F 2 "SM0805" H 4200 5100 60  0001 C CNN
	1    4200 5100
	-1   0    0    1   
$EndComp
$Comp
L C C14
U 1 1 4E97F033
P 3600 5100
F 0 "C14" H 3650 5200 50  0000 L CNN
F 1 "22pF" H 3650 5000 50  0000 L CNN
F 2 "SM0805" H 3600 5100 60  0001 C CNN
	1    3600 5100
	-1   0    0    1   
$EndComp
Text Label 2300 3100 2    60   ~ 0
SCLK
$EndSCHEMATC
