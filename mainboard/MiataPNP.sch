EESchema Schematic File Version 2  date 10/26/2011 1:52:18 PM
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:special
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:PNPComponents
LIBS:MiataPNP-cache
EELAYER 25  0
EELAYER END
$Descr A4 11700 8267
encoding utf-8
Sheet 1 7
Title "Standalone ECU for 99 Miata using MicroSquirtModule"
Date "26 oct 2011"
Rev "1"
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Connection ~ 9800 2400
Wire Wire Line
	9950 2400 9800 2400
Wire Wire Line
	3950 7100 3550 7100
Wire Wire Line
	3550 6900 3950 6900
Wire Wire Line
	3950 7000 3550 7000
Wire Wire Line
	5450 4850 5800 4850
Wire Wire Line
	4900 4850 4500 4850
Wire Wire Line
	4850 1300 4550 1300
Wire Wire Line
	5550 1450 5900 1450
Wire Wire Line
	5550 1150 5900 1150
Wire Wire Line
	2350 6900 2850 6900
Wire Wire Line
	2350 7100 2850 7100
Wire Wire Line
	1550 6900 1150 6900
Wire Wire Line
	3100 2650 3450 2650
Wire Wire Line
	3100 2350 3450 2350
Wire Wire Line
	7300 6800 6750 6800
Wire Wire Line
	7300 6600 6750 6600
Wire Wire Line
	5450 7000 5100 7000
Wire Wire Line
	5700 6100 6100 6100
Wire Wire Line
	5700 5900 6100 5900
Wire Wire Line
	4650 6300 4300 6300
Wire Wire Line
	4650 6100 4300 6100
Wire Wire Line
	4650 5900 4300 5900
Wire Wire Line
	8800 3100 9100 3100
Wire Wire Line
	8800 2700 9100 2700
Wire Wire Line
	9100 1500 8800 1500
Wire Wire Line
	9950 4200 9650 4200
Wire Wire Line
	7050 1400 7200 1400
Wire Wire Line
	7200 1400 7300 1400
Wire Wire Line
	3100 1150 3350 1150
Wire Wire Line
	9100 1400 8800 1400
Wire Wire Line
	9650 4100 9950 4100
Wire Wire Line
	9950 2900 8800 2900
Wire Wire Line
	8800 2100 9100 2100
Wire Wire Line
	7300 1700 6850 1700
Wire Wire Line
	8800 3600 9100 3600
Wire Wire Line
	9950 4300 9650 4300
Connection ~ 8800 4250
Connection ~ 8800 4450
Connection ~ 7300 4450
Wire Wire Line
	7300 4050 7300 4150
Wire Wire Line
	7300 4150 7300 4250
Wire Wire Line
	7300 4250 7300 4350
Wire Wire Line
	7300 4350 7300 4450
Wire Wire Line
	7300 4450 7300 4750
Connection ~ 7300 4250
Wire Wire Line
	8800 1800 9100 1800
Wire Wire Line
	7300 3750 7050 3750
Wire Wire Line
	7300 3500 7050 3500
Wire Wire Line
	8800 2800 9100 2800
Wire Wire Line
	9100 2500 8800 2500
Wire Wire Line
	9600 3000 9750 3000
Wire Wire Line
	3100 3000 3450 3000
Wire Wire Line
	3100 3500 3450 3500
Wire Wire Line
	1550 3150 1150 3150
Wire Wire Line
	1550 2950 1150 2950
Wire Wire Line
	1550 2150 1150 2150
Wire Wire Line
	1550 1750 1150 1750
Wire Wire Line
	1550 1550 1150 1550
Wire Wire Line
	1550 1350 900  1350
Wire Wire Line
	3100 2450 3450 2450
Wire Wire Line
	3100 3700 3450 3700
Wire Wire Line
	3100 3900 3450 3900
Wire Wire Line
	3100 3400 3450 3400
Wire Wire Line
	1400 1050 1400 1150
Connection ~ 1400 1050
Wire Wire Line
	1550 2350 1150 2350
Wire Wire Line
	8800 1200 9100 1200
Wire Wire Line
	8800 3300 9100 3300
Wire Wire Line
	8800 3200 9100 3200
Wire Wire Line
	8800 2400 9100 2400
Wire Wire Line
	8800 1600 9100 1600
Wire Wire Line
	8800 2000 9100 2000
Wire Wire Line
	8800 2600 9100 2600
Wire Wire Line
	8800 3700 9100 3700
Wire Wire Line
	8800 1300 9100 1300
Wire Wire Line
	9100 1300 9100 1200
Wire Wire Line
	9100 1200 9100 1050
Connection ~ 9100 1200
Wire Wire Line
	1400 1150 1550 1150
Wire Wire Line
	1150 1250 1250 1250
Wire Wire Line
	1250 1250 1550 1250
Wire Wire Line
	1550 1050 1400 1050
Wire Wire Line
	1400 1050 1150 1050
Wire Wire Line
	3100 3600 3450 3600
Wire Wire Line
	3100 3800 3450 3800
Wire Wire Line
	3100 3100 3450 3100
Wire Wire Line
	3100 1350 3350 1350
Wire Wire Line
	1550 1450 1250 1450
Wire Wire Line
	1250 1450 1250 1250
Connection ~ 1250 1250
Wire Wire Line
	1550 1650 1150 1650
Wire Wire Line
	1550 2050 1150 2050
Wire Wire Line
	1550 2250 1150 2250
Wire Wire Line
	1550 3050 1150 3050
Wire Wire Line
	1550 3250 1150 3250
Wire Wire Line
	3100 3300 3450 3300
Wire Wire Line
	8800 2200 9100 2200
Connection ~ 7300 4150
Connection ~ 7300 4350
Wire Wire Line
	7300 4750 8800 4750
Connection ~ 8800 4350
Wire Wire Line
	8800 4750 8800 4450
Wire Wire Line
	8800 4450 8800 4350
Wire Wire Line
	8800 4350 8800 4250
Wire Wire Line
	8800 4250 8800 4150
Wire Wire Line
	8800 4150 8800 4050
Connection ~ 8800 4150
Wire Wire Line
	6850 1500 7300 1500
Wire Wire Line
	6850 2000 7300 2000
Wire Wire Line
	8800 2300 9100 2300
Wire Wire Line
	9100 3000 8800 3000
Wire Wire Line
	10350 2900 10600 2900
Wire Wire Line
	7300 1600 7200 1600
Wire Wire Line
	7200 1600 7200 1400
Connection ~ 7200 1400
Wire Wire Line
	8800 1700 9100 1700
Wire Wire Line
	4650 5800 4300 5800
Wire Wire Line
	4650 6000 4300 6000
Wire Wire Line
	4650 6200 4300 6200
Wire Wire Line
	5700 5800 6100 5800
Wire Wire Line
	5700 6000 6100 6000
Wire Wire Line
	5450 6900 5100 6900
Wire Wire Line
	5450 7100 5100 7100
Wire Wire Line
	7300 6700 6750 6700
Wire Wire Line
	3100 2150 3450 2150
Wire Wire Line
	3100 2850 3450 2850
Wire Wire Line
	1550 7000 1150 7000
Wire Wire Line
	1550 7100 1150 7100
Wire Wire Line
	2350 7000 2850 7000
Wire Wire Line
	7300 1800 6850 1800
Wire Wire Line
	5550 1300 5900 1300
Wire Wire Line
	4850 1150 4550 1150
Wire Wire Line
	4850 1450 4550 1450
Wire Wire Line
	4850 2350 4550 2350
Wire Wire Line
	4850 2050 4550 2050
Wire Wire Line
	5550 2200 5900 2200
Wire Wire Line
	5550 2050 5900 2050
Wire Wire Line
	5550 2350 5900 2350
Wire Wire Line
	4850 2200 4550 2200
Wire Wire Line
	4850 4000 4550 4000
Wire Wire Line
	5550 4150 5900 4150
Wire Wire Line
	5550 3850 5900 3850
Wire Wire Line
	5550 4000 5900 4000
Wire Wire Line
	4850 3850 4550 3850
Wire Wire Line
	4850 4150 4550 4150
Wire Wire Line
	4850 3250 4550 3250
Wire Wire Line
	4850 2950 4550 2950
Wire Wire Line
	5550 3100 5900 3100
Wire Wire Line
	5550 2950 5900 2950
Wire Wire Line
	5550 3250 5900 3250
Wire Wire Line
	4850 3100 4550 3100
Wire Wire Line
	4900 5150 4500 5150
Wire Wire Line
	9600 2500 9800 2500
Wire Wire Line
	9800 2500 9800 2400
Wire Wire Line
	9800 2400 9800 2100
Text Label 3900 7000 2    60   ~ 0
GND
Text Label 3900 6900 2    60   ~ 0
12VRAW
$Comp
L CONN_3 K?
U 1 1 4EA870DE
P 4300 7000
F 0 "K?" V 4250 7000 50  0000 C CNN
F 1 "CONN_3" V 4350 7000 40  0000 C CNN
F 2 "JACK_ALIM" H 4300 7000 60  0001 C CNN
F 4 "CP-102A-ND" V 4300 7000 60  0001 C CNN "Digikey"
	1    4300 7000
	1    0    0    -1  
$EndComp
Text Notes 3650 7350 0    60   ~ 0
External Power
Text Label 5500 4850 0    60   ~ 0
5V
Text Label 4850 5150 2    60   ~ 0
GND
Text Label 4850 4850 2    60   ~ 0
12VRAW
$Sheet
S 4900 4700 550  600 
U 4EA86F7C
F0 "PowerSupply" 60
F1 "PowerSupply.sch" 60
F2 "5V" I R 5450 4850 60 
F3 "12V" I L 4900 4850 60 
F4 "GND" I L 4900 5150 60 
$EndSheet
$Sheet
S 4850 2800 700  550 
U 4EA86E88
F0 "Inj3" 60
F1 "InjectorDriver.sch" 60
F2 "INJGND" I L 4850 3100 60 
F3 "INJ" I L 4850 2950 60 
F4 "FB" I L 4850 3250 60 
F5 "GND" I R 5550 3250 60 
F6 "VCC" I R 5550 2950 60 
F7 "IN" I R 5550 3100 60 
$EndSheet
Text Label 4800 2950 2    60   ~ 0
INJ3
Text Label 4800 3100 2    60   ~ 0
BIGGND
Text Label 4800 3250 2    60   ~ 0
FB
Text Label 5650 2950 0    60   ~ 0
5V
Text Label 5650 3100 0    60   ~ 0
sig3
Text Label 5650 3250 0    60   ~ 0
GND
Text Label 5650 4150 0    60   ~ 0
GND
Text Label 5650 4000 0    60   ~ 0
sig4
Text Label 5650 3850 0    60   ~ 0
5V
Text Label 4800 4150 2    60   ~ 0
FB
Text Label 4800 4000 2    60   ~ 0
BIGGND
Text Label 4800 3850 2    60   ~ 0
INJ4
$Sheet
S 4850 3700 700  550 
U 4EA86E87
F0 "Inj4" 60
F1 "InjectorDriver.sch" 60
F2 "INJGND" I L 4850 4000 60 
F3 "INJ" I L 4850 3850 60 
F4 "FB" I L 4850 4150 60 
F5 "GND" I R 5550 4150 60 
F6 "VCC" I R 5550 3850 60 
F7 "IN" I R 5550 4000 60 
$EndSheet
$Sheet
S 4850 1900 700  550 
U 4EA86E5C
F0 "Inj2" 60
F1 "InjectorDriver.sch" 60
F2 "INJGND" I L 4850 2200 60 
F3 "INJ" I L 4850 2050 60 
F4 "FB" I L 4850 2350 60 
F5 "GND" I R 5550 2350 60 
F6 "VCC" I R 5550 2050 60 
F7 "IN" I R 5550 2200 60 
$EndSheet
Text Label 4800 2050 2    60   ~ 0
INJ2
Text Label 4800 2200 2    60   ~ 0
BIGGND
Text Label 4800 2350 2    60   ~ 0
FB
Text Label 5650 2050 0    60   ~ 0
5V
Text Label 5650 2200 0    60   ~ 0
sig2
Text Label 5650 2350 0    60   ~ 0
GND
Text Label 5650 1450 0    60   ~ 0
GND
Text Label 5650 1300 0    60   ~ 0
sig1
Text Label 5650 1150 0    60   ~ 0
5V
Text Label 4800 1450 2    60   ~ 0
FB
Text Label 4800 1300 2    60   ~ 0
BIGGND
Text Label 4800 1150 2    60   ~ 0
INJ1
$Sheet
S 4850 1000 700  550 
U 4EA86CCC
F0 "Inj1" 60
F1 "InjectorDriver.sch" 60
F2 "INJGND" I L 4850 1300 60 
F3 "INJ" I L 4850 1150 60 
F4 "FB" I L 4850 1450 60 
F5 "GND" I R 5550 1450 60 
F6 "VCC" I R 5550 1150 60 
F7 "IN" I R 5550 1300 60 
$EndSheet
Text Label 2400 7100 0    60   ~ 0
ChargeLight
Text Label 2400 7000 0    60   ~ 0
PhaseSense
Text Label 1500 6900 2    60   ~ 0
FieldDriver
Text Label 1500 7100 2    60   ~ 0
12VRAW
Text Label 1500 7000 2    60   ~ 0
FieldCtl
$Comp
L CONN_3X2 P?
U 1 1 4EA5B563
P 1950 7050
F 0 "P?" H 1950 7300 50  0000 C CNN
F 1 "CONN_3X2" V 1950 7100 40  0000 C CNN
	1    1950 7050
	1    0    0    -1  
$EndComp
Text Notes 1400 7300 0    60   ~ 0
Jumpers for NA/NB alternator\nTop NB, Bottom NA
Text Label 3150 2650 0    60   ~ 0
PhaseSense
Text Label 3150 2850 0    60   ~ 0
Neutral
Text Label 3150 2350 0    60   ~ 0
ChargeLight
Text Label 3150 2150 0    60   ~ 0
FieldCtl
Text Notes 6650 7000 0    60   ~ 0
Serial Connector via 3.5mm plug
Text Label 6850 6700 0    60   ~ 0
SerialTX
Text Label 6850 6800 0    60   ~ 0
GND
Text Label 6850 6600 0    60   ~ 0
SerialRX
$Comp
L CONN_3 K?
U 1 1 4EA319A1
P 7650 6700
F 0 "K?" V 7600 6700 50  0000 C CNN
F 1 "3.5mm" V 7700 6700 40  0000 C CNN
F 2 "TO220" H 7650 6700 60  0001 C CNN
	1    7650 6700
	1    0    0    -1  
$EndComp
Text Label 5400 7100 2    60   ~ 0
GND
Text Label 5400 7000 2    60   ~ 0
OilPressure
Text Label 5400 6900 2    60   ~ 0
WB
$Comp
L CONN_3 K?
U 1 1 4EA3176F
P 5800 7000
F 0 "K?" V 5750 7000 50  0000 C CNN
F 1 "CONN_3" V 5850 7000 40  0000 C CNN
F 2 "External3" H 5800 7000 60  0001 C CNN
	1    5800 7000
	1    0    0    -1  
$EndComp
Text Label 8900 1700 0    60   ~ 0
SerialTx
Text Label 8900 1500 0    60   ~ 0
SerialRx
Text Label 8900 1400 0    60   ~ 0
MAP
Text Label 5750 6100 0    60   ~ 0
CANL
Text Label 5750 6000 0    60   ~ 0
CANH
Text Label 5750 5900 0    60   ~ 0
GND
Text Label 5750 5800 0    60   ~ 0
5V
Text Label 4600 6300 2    60   ~ 0
IGN1
Text Label 4600 6200 2    60   ~ 0
IGN2
Text Label 4600 6100 2    60   ~ 0
KnockSensor
Text Label 4600 6000 2    60   ~ 0
VSSSignal
Text Label 4600 5900 2    60   ~ 0
IAC
$Sheet
S 4650 5700 1050 750 
U 4EA3092F
F0 "CoProcessor" 60
F1 "CoProcessor.sch" 60
F2 "ExtraDriver" I L 4650 5800 60 
F3 "IAC" I L 4650 5900 60 
F4 "CANL" I R 5700 6100 60 
F5 "KnockSensor" I L 4650 6100 60 
F6 "Ignition2" I L 4650 6200 60 
F7 "Ignition1" I L 4650 6300 60 
F8 "VSSSignal" I L 4650 6000 60 
F9 "5V" I R 5700 5800 60 
F10 "GND" I R 5700 5900 60 
F11 "CANH" I R 5700 6000 60 
$EndSheet
Text Label 8900 3100 0    60   ~ 0
Purge
Text Notes 9450 3250 0    60   ~ 0
Idle Driver used for Purge
Text Label 8900 2700 0    60   ~ 0
OilPressure
Text Label 7100 1400 0    60   ~ 0
GND
Text Label 10350 2900 0    60   ~ 0
Clutch
$Comp
L DIODE D?
U 1 1 4EA08EF7
P 10150 2900
F 0 "D?" H 10150 3000 40  0000 C CNN
F 1 "1N4001" H 10150 2800 40  0000 C CNN
F 2 "D4" H 10150 2900 60  0001 C CNN
	1    10150 2900
	1    0    0    -1  
$EndComp
$Comp
L MPX4250AP U?
U 1 1 4E9F35B8
P 10550 4350
F 0 "U?" H 10300 4700 60  0000 C CNN
F 1 "MPX4250AP" H 10450 4000 60  0000 C CNN
F 2 "MPX4250AP" H 10200 4600 60  0001 C CNN
	1    10550 4350
	1    0    0    -1  
$EndComp
Text Notes 5150 7300 0    60   ~ 0
External Connector
$Comp
L R R?
U 1 1 4E9BD276
P 9950 2650
F 0 "R?" V 10030 2650 50  0000 C CNN
F 1 "10K" V 9950 2650 50  0000 C CNN
F 2 "R4" H 9950 2650 60  0001 C CNN
	1    9950 2650
	-1   0    0    1   
$EndComp
Text Label 8900 2900 0    60   ~ 0
Launch
Text Label 8900 2300 0    60   ~ 0
CANL
Text Label 8900 2100 0    60   ~ 0
CANH
Text Label 7100 1800 2    60   ~ 0
sig4
Text Label 7100 2000 2    60   ~ 0
sig3
Text Label 7100 1700 2    60   ~ 0
sig2
Text Label 7100 1500 2    60   ~ 0
sig1
Text Label 8900 3600 0    60   ~ 0
WB
Text Label 9700 4300 0    60   ~ 0
Vref
Text Label 9700 4200 0    60   ~ 0
GND
Text Label 9700 4100 0    60   ~ 0
MAP
Text Label 8000 4750 0    60   ~ 0
GND
Text Label 8900 2200 0    60   ~ 0
FAN
Text Label 8900 1800 0    60   ~ 0
CEL
Text Label 7100 3750 0    60   ~ 0
IGN1
Text Label 7100 3500 0    60   ~ 0
IGN2
Text Label 8900 2800 0    60   ~ 0
FuelPressure
Text Label 9800 2150 3    60   ~ 0
5V
$Comp
L R R?
U 1 1 4E97EB9D
P 9350 2500
F 0 "R?" V 9430 2500 50  0000 C CNN
F 1 "470" V 9350 2500 50  0000 C CNN
F 2 "R4" H 9350 2500 60  0001 C CNN
	1    9350 2500
	0    1    1    0   
$EndComp
Text Label 9600 3000 0    60   ~ 0
12VRAW
$Comp
L R R?
U 1 1 4E97EB45
P 9350 3000
F 0 "R?" V 9430 3000 50  0000 C CNN
F 1 "470" V 9350 3000 50  0000 C CNN
F 2 "R4" H 9350 3000 60  0001 C CNN
	1    9350 3000
	0    1    1    0   
$EndComp
Text Label 3150 3000 0    60   ~ 0
FuelPressure
Text Label 3150 3300 0    60   ~ 0
VSSSignal
Text Label 3150 3500 0    60   ~ 0
KnockSensor
Text Label 3150 3900 0    60   ~ 0
TACH
Text Label 3150 3800 0    60   ~ 0
CRANK
Text Label 3150 3700 0    60   ~ 0
Vref
Text Label 3150 3600 0    60   ~ 0
CAM
Text Label 3150 3400 0    60   ~ 0
CLT
Text Label 3150 3100 0    60   ~ 0
IAT
Text Label 3150 2450 0    60   ~ 0
FAN
Text Label 3150 1350 0    60   ~ 0
CEL
Text Label 1200 3250 0    60   ~ 0
INJ4
Text Label 1200 3150 0    60   ~ 0
INJ3
Text Label 1200 3050 0    60   ~ 0
INJ2
Text Label 1200 2950 0    60   ~ 0
INJ1
Text Label 1200 2250 0    60   ~ 0
FuelPump
Text Label 1200 2150 0    60   ~ 0
IAC
Text Label 1200 2050 0    60   ~ 0
Purge
Text Label 1200 1750 0    60   ~ 0
Clutch
Text Label 1200 1650 0    60   ~ 0
IGN2
Text Label 1200 1550 0    60   ~ 0
IGN1
Text Label 950  1350 0    60   ~ 0
TPS
Text Label 1150 1050 0    60   ~ 0
BIGGND
Text Label 1300 1250 0    60   ~ 0
GND
Text Label 1200 2350 0    60   ~ 0
12VRAW
Text Label 3150 1150 0    60   ~ 0
12VRAW
Text Label 9100 1200 0    60   ~ 0
12VRAW
Text Label 8900 3700 0    60   ~ 0
TACH
Text Label 8900 3300 0    60   ~ 0
FuelPump
Text Label 8900 2600 0    60   ~ 0
Vref
Text Label 8900 3200 0    60   ~ 0
CRANK
Text Label 8900 2500 0    60   ~ 0
CAM
Text Label 8900 2400 0    60   ~ 0
TPS
Text Label 8900 2000 0    60   ~ 0
MAT
Text Label 8900 1600 0    60   ~ 0
CLT
$Comp
L USMODULE U?
U 1 1 4E967618
P 8050 2750
F 0 "U?" H 7650 4450 60  0000 C CNN
F 1 "USMODULE" H 8300 900 60  0000 C CNN
F 2 "USMODULE" H 8300 4450 60  0001 C CNN
	1    8050 2750
	1    0    0    -1  
$EndComp
$Comp
L ECU U?
U 1 1 4E9651F0
P 2150 2500
F 0 "U?" H 1900 4050 60  0000 C CNN
F 1 "ECU" H 2650 450 60  0000 C CNN
F 2 "MiataECU" H 2450 4050 60  0001 C CNN
	1    2150 2500
	1    0    0    -1  
$EndComp
$EndSCHEMATC
